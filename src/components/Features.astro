---
// using plain <img> tags for thumbnails to allow responsive sizing via CSS
interface Props { lang?: string }
const { lang = 'cs' } = Astro.props as Props;
---
<section class="features">
  <h2>{lang === 'en' ? 'Key features of the AI people counting system' : 'Klíčové vlastnosti AI systému pro počítání návštěvníků'}</h2>
  <ul>
    <li>{lang === 'en' ? 'Accurate real-time people counting' : 'Přesné počítání osob v reálném čase'}</li>
    <li>{lang === 'en' ? 'Data stored in Microsoft Azure cloud' : 'Data jsou ukládána do Microsoft Azure cloudu'}</li>
    <li>{lang === 'en' ? 'Export data to Microsoft Excel' : 'Export dat do Microsoft Excelu'}</li>
    <li>{lang === 'en' ? 'Modern web interface for management and visualization' : 'Moderní webové rozhraní pro správu a vizualizaci dat'}</li>
    <li>{lang === 'en' ? 'Integration with other systems' : 'Možnost integrace s dalšími systémy'}</li>
    <li>{lang === 'en' ? 'Visitor categorization estimate (men, women, children, strollers)' : 'Odhad pro kategorizace návštěvníků (muži, ženy, děti, kočárky)'}</li>
    <li>{lang === 'en' ? 'Advanced telemetry and camera monitoring' : 'Pokročilá telemetrie a monitoring stavu kamer'}</li>
    <li>{lang === 'en' ? 'Security and privacy protection' : 'Bezpečnost a ochrana soukromí'}</li>
  </ul>
  
  <div class="col-12 col-md-6">
    <div class="feature-image-item">
      <div class="image-container">
        <img src="/footfall-preview.jpg" alt={lang === 'en' ? 'Footfall overview preview' : 'Náhled přehledu návštěvnosti'} loading="lazy" />
      </div>
      <p class="feature-image-caption">{lang === 'en' ? 'Footfall overview preview' : 'Náhled přehledu návštěvnosti'}</p>
    </div>
  </div>
  
  <div class="row g-4 mt-3">
    <div class="col-12 col-md-6">
      <div class="feature-image-item">
        <div class="image-container">
          <img src="/in-person-chart.png" alt="Graf návštěvnosti v portálu AZ Vision" loading="lazy" />
        </div>
        <p class="feature-image-caption">{lang === 'en' ? 'Portal visitor chart' : 'Graf návštěvnosti v portálu'}</p>
      </div>
    </div>
    
    <div class="col-12 col-md-6">
      <div class="feature-image-item">
        <div class="image-container">
          <img src="/advanced-telemetry.png" alt="Graf telemetrie v portálu AZ Vision" loading="lazy" />
        </div>
        <p class="feature-image-caption">{lang === 'en' ? 'Advanced telemetry and camera status' : 'Pokročilá telemetrie a stav kamer'}</p>
      </div>
    </div>
    
    <div class="col-12 col-md-6">
      <div class="feature-image-item">
        <div class="image-container">
          <img src="/excel-export.png" alt="Export dat do Microsoft Excelu" loading="lazy" />
        </div>
        <p class="feature-image-caption">{lang === 'en' ? 'Export data to Microsoft Excel' : 'Export dat do Microsoft Excelu'}</p>
      </div>
    </div>
    
    <div class="col-12 col-md-6">
      <div class="feature-image-item">
        <div class="image-container">
          <img src="/visitors-categories.png" alt="Kategorizace návštěvníků" loading="lazy" />
        </div>
        <p class="feature-image-caption">{lang === 'en' ? 'Visitor categorization (men, women, children, strollers)' : 'Kategorizace návštěvníků (muži, ženy, děti, kočárky)'}</p>
      </div>
    </div>
    
    <div class="col-12 col-md-6">
      <div class="feature-image-item">
        <div class="image-container">
          <img src="/threshold-line-setup.png" alt="Threshold line setup" loading="lazy" />
        </div>
        <p class="feature-image-caption">{lang === 'en' ? 'Interactive counting threshold setup' : 'Interaktivní nastavení prahu počítání'}</p>
      </div>
    </div>
    
    <div class="col-12 col-md-6">
      <div class="feature-image-item">
        <div class="image-container">
          <img src="/short-clips-recordings.png" alt="Short clip recordings" loading="lazy" />
        </div>
        <p class="feature-image-caption">{lang === 'en' ? 'Short clip recordings' : 'Krátké záznamy průchodů'}</p>
      </div>
    </div>

    <div class="col-12 col-md-6">
      <div class="feature-image-item">
        <div class="image-container video-wrapper" style="position:relative;">
          <video id="detection-video" src="/detection-2025-10-25T17_25_45.016.mp4" controls style="width:100%;height:auto;display:block;border-radius:0.75rem;background:#000;"></video>
          <button id="custom-play-btn" type="button" aria-label="Play video" style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.6);border:none;border-radius:50%;width:80px;height:80px;display:flex;align-items:center;justify-content:center;z-index:2;cursor:pointer;transition:background 0.2s;">
            <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="24" cy="24" r="24" fill="white" fill-opacity="0.85"/>
              <polygon points="19,15 36,24 19,33" fill="#222"/>
            </svg>
          </button>
        </div>
        <p class="feature-image-caption">{lang === 'en' ? 'Detection video sample' : 'Ukázka detekce návštěvníka'}</p>
        <script is:inline>
          const video = document.getElementById('detection-video');
          const playBtn = document.getElementById('custom-play-btn');
          if (video && playBtn) {
            // Hide play button if video is playing
            const updateBtn = () => {
              playBtn.style.display = video.paused ? 'flex' : 'none';
            };
            playBtn.addEventListener('click', () => {
              video.play();
            });
            video.addEventListener('play', updateBtn);
            video.addEventListener('pause', updateBtn);
            updateBtn();
          }
        </script>
      </div>
    </div>
  </div>
</section>

<style>
  /* Ensure preview thumbnails keep aspect ratio and don't stretch */
  .image-container,
  .image-container picture,
  .image-container img {
    width: 100%;
    height: auto !important;
    display: block;
  }
</style>
